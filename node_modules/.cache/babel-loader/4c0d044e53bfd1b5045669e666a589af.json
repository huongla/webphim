{"ast":null,"code":"import Axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { ACCESSTOKEN, USER_LOGIN, DOMAIN, ACCOUNTLOGIN } from '../../Util/Config';\nimport { history } from '../../Util/history';\nimport { CAP_NHAT_THONG_TIN_CA_NHAN, DANG_NHAP, LICH_SU_DAT_VE } from '../const/QuanLyPhimConst';\nexport const dangNhapApiAction = async userLogin => {\n  return async dispatch => {\n    try {\n      let result = await Axios({\n        url: DOMAIN + '/api/quanlynguoidung/dangnhap',\n        method: 'POST',\n        data: userLogin\n      });\n      localStorage.setItem(USER_LOGIN, JSON.stringify(result.data));\n      localStorage.setItem(ACCESSTOKEN, result.data.accessToken);\n      localStorage.setItem(ACCOUNTLOGIN, JSON.stringify(userLogin));\n      Swal.fire('Thông báo', 'Đăng nhập thành công', 'success');\n      history.push('/home');\n      dispatch({\n        type: DANG_NHAP,\n        data: result.data,\n        account: userLogin\n      });\n    } catch (err) {\n      Swal.fire('Thông báo', err.response.data, 'error');\n    }\n  };\n};\nexport const dangKyApiAction = async userSignup => {\n  return async dispatch => {\n    try {\n      let result = await Axios({\n        url: DOMAIN + '/api/QuanLyNguoiDung/DangKy',\n        method: 'POST',\n        data: userSignup\n      });\n      Swal.fire('Thông báo', 'Đăng ký thành công', 'success');\n      history.push('/dangnhap');\n    } catch (err) {\n      Swal.fire('Thông báo', err.response.data, 'error');\n    }\n  };\n};\nexport const lichSuDatVeApiAction = async account => {\n  return async dispatch => {\n    try {\n      let result = await Axios({\n        url: DOMAIN + '/api/QuanLyNguoiDung/ThongTinTaiKhoan',\n        method: 'POST',\n        data: {\n          taiKhoan: account\n        },\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem(ACCESSTOKEN)\n        }\n      });\n      dispatch({\n        type: LICH_SU_DAT_VE,\n        data: result.data\n      });\n    } catch (err) {\n      console.log(err.response.data);\n    }\n  };\n};\nexport const capNhatThongTinCaNhan = async update => {\n  return async dispatch => {\n    try {\n      let result = await Axios({\n        url: 'https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/CapNhatThongTinNguoiDung',\n        method: 'PUT',\n        data: update,\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem(ACCESSTOKEN)\n        }\n      });\n      dispatch({\n        type: CAP_NHAT_THONG_TIN_CA_NHAN,\n        data: update\n      });\n      Swal.fire({\n        title: 'Cập nhật thành công.',\n        text: \"Vui lòng đăng nhập lại\",\n        icon: 'success',\n        confirmButtonColor: '#3085d6',\n        confirmButtonText: 'OK'\n      }).then(result => {\n        if (result.isConfirmed) {\n          localStorage.clear();\n          window.location.href = '/dangnhap';\n        }\n      });\n    } catch (err) {\n      Swal.fire('Thông báo', 'Cập nhật thất bại', 'error');\n    }\n  };\n};","map":{"version":3,"sources":["E:/FRONTEND/webphim/src/redux/actions/QuanLyNguoiDungActions.js"],"names":["Axios","Swal","ACCESSTOKEN","USER_LOGIN","DOMAIN","ACCOUNTLOGIN","history","CAP_NHAT_THONG_TIN_CA_NHAN","DANG_NHAP","LICH_SU_DAT_VE","dangNhapApiAction","userLogin","dispatch","result","url","method","data","localStorage","setItem","JSON","stringify","accessToken","fire","push","type","account","err","response","dangKyApiAction","userSignup","lichSuDatVeApiAction","taiKhoan","headers","getItem","console","log","capNhatThongTinCaNhan","update","title","text","icon","confirmButtonColor","confirmButtonText","then","isConfirmed","clear","window","location","href"],"mappings":"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","sourcesContent":["import Axios from 'axios'\r\nimport Swal from 'sweetalert2'\r\nimport { ACCESSTOKEN, USER_LOGIN, DOMAIN, ACCOUNTLOGIN } from '../../Util/Config'\r\nimport { history } from '../../Util/history'\r\nimport { CAP_NHAT_THONG_TIN_CA_NHAN, DANG_NHAP, LICH_SU_DAT_VE } from '../const/QuanLyPhimConst'\r\nexport const dangNhapApiAction = async (userLogin) => {\r\n    return async (dispatch) => {\r\n        try {\r\n\r\n            let result = await Axios({\r\n                url: DOMAIN + '/api/quanlynguoidung/dangnhap',\r\n                method: 'POST',\r\n                data: userLogin\r\n            })\r\n            localStorage.setItem(USER_LOGIN, JSON.stringify(result.data));\r\n            localStorage.setItem(ACCESSTOKEN, result.data.accessToken);\r\n            localStorage.setItem(ACCOUNTLOGIN, JSON.stringify(userLogin));\r\n            Swal.fire('Thông báo', 'Đăng nhập thành công', 'success')\r\n            history.push('/home')\r\n            dispatch({\r\n                type: DANG_NHAP,\r\n                data: result.data,\r\n                account: userLogin\r\n            })\r\n        } catch (err) {\r\n            Swal.fire('Thông báo', err.response.data, 'error')\r\n        }\r\n    }\r\n}\r\nexport const dangKyApiAction = async (userSignup) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = await Axios({\r\n                url: DOMAIN + '/api/QuanLyNguoiDung/DangKy',\r\n                method: 'POST',\r\n                data: userSignup\r\n            })\r\n            Swal.fire('Thông báo', 'Đăng ký thành công', 'success')\r\n            history.push('/dangnhap')\r\n        } catch (err) {\r\n            Swal.fire('Thông báo', err.response.data, 'error')\r\n        }\r\n    }\r\n}\r\nexport const lichSuDatVeApiAction = async (account) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = await Axios({\r\n                url: DOMAIN + '/api/QuanLyNguoiDung/ThongTinTaiKhoan',\r\n                method: 'POST',\r\n                data: { taiKhoan: account },\r\n                headers: { 'Authorization': 'Bearer ' + localStorage.getItem(ACCESSTOKEN) }\r\n            })\r\n            dispatch({\r\n                type: LICH_SU_DAT_VE,\r\n                data: result.data\r\n            })\r\n        } catch (err) {\r\n            console.log(err.response.data);\r\n        }\r\n    }\r\n}\r\nexport const capNhatThongTinCaNhan = async (update) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = await Axios({\r\n                url: 'https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/CapNhatThongTinNguoiDung',\r\n                method: 'PUT',\r\n                data: update,\r\n                headers: { 'Authorization': 'Bearer ' + localStorage.getItem(ACCESSTOKEN) }\r\n            })\r\n            dispatch({\r\n                type: CAP_NHAT_THONG_TIN_CA_NHAN,\r\n                data: update\r\n            })\r\n            Swal.fire({\r\n                title: 'Cập nhật thành công.',\r\n                text: \"Vui lòng đăng nhập lại\",\r\n                icon: 'success',\r\n                confirmButtonColor: '#3085d6',\r\n                confirmButtonText: 'OK',\r\n            }).then((result) => {\r\n                if (result.isConfirmed) {\r\n                    localStorage.clear();\r\n                    window.location.href = '/dangnhap';\r\n                }\r\n            })\r\n\r\n        } catch (err) {\r\n            Swal.fire('Thông báo', 'Cập nhật thất bại', 'error')\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}