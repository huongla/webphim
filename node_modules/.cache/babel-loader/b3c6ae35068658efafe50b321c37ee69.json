{"ast":null,"code":"import _regeneratorRuntime from\"E:/FRONTEND/webphim/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/FRONTEND/webphim/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from'axios';import Swal from'sweetalert2';import{ACCESSTOKEN,USER_LOGIN,DOMAIN,ACCOUNTLOGIN}from'../../Util/Config';import{history}from'../../Util/history';import{CAP_NHAT_THONG_TIN_CA_NHAN,DANG_NHAP,LICH_SU_DAT_VE}from'../const/QuanLyPhimConst';export var dangNhapApiAction=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userLogin){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Axios({url:DOMAIN+'/api/quanlynguoidung/dangnhap',method:'POST',data:userLogin});case 3:result=_context.sent;localStorage.setItem(USER_LOGIN,JSON.stringify(result.data));localStorage.setItem(ACCESSTOKEN,result.data.accessToken);localStorage.setItem(ACCOUNTLOGIN,JSON.stringify(userLogin));Swal.fire('Thông báo','Đăng nhập thành công','success');history.push('/home');dispatch({type:DANG_NHAP,data:result.data,account:userLogin});_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);Swal.fire('Thông báo',_context.t0.response.data,'error');case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function dangNhapApiAction(_x){return _ref.apply(this,arguments);};}();export var dangKyApiAction=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(userSignup){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Axios({url:DOMAIN+'/api/QuanLyNguoiDung/DangKy',method:'POST',data:userSignup});case 3:result=_context3.sent;Swal.fire('Thông báo','Đăng ký thành công','success');history.push('/dangnhap');_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);Swal.fire('Thông báo',_context3.t0.response.data,'error');case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x4){return _ref4.apply(this,arguments);};}());case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function dangKyApiAction(_x3){return _ref3.apply(this,arguments);};}();export var lichSuDatVeApiAction=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(account){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt(\"return\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return Axios({url:DOMAIN+'/api/QuanLyNguoiDung/ThongTinTaiKhoan',method:'POST',data:{taiKhoan:account},headers:{'Authorization':'Bearer '+localStorage.getItem(ACCESSTOKEN)}});case 3:result=_context5.sent;dispatch({type:LICH_SU_DAT_VE,data:result.data});_context5.next=10;break;case 7:_context5.prev=7;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0.response.data);case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,7]]);}));return function(_x6){return _ref6.apply(this,arguments);};}());case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function lichSuDatVeApiAction(_x5){return _ref5.apply(this,arguments);};}();export var capNhatThongTinCaNhan=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(update){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:return _context8.abrupt(\"return\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var result;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return Axios({url:'https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/CapNhatThongTinNguoiDung',method:'PUT',data:update,headers:{'Authorization':'Bearer '+localStorage.getItem(ACCESSTOKEN)}});case 3:result=_context7.sent;dispatch({type:CAP_NHAT_THONG_TIN_CA_NHAN,data:update});Swal.fire({title:'Cập nhật thành công.',text:\"Vui lòng đăng nhập lại\",icon:'success',confirmButtonColor:'#3085d6',confirmButtonText:'OK'}).then(function(result){if(result.isConfirmed){localStorage.clear();window.location.href='/dangnhap';}});_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);Swal.fire('Thông báo','Cập nhật thất bại','error');case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[0,8]]);}));return function(_x8){return _ref8.apply(this,arguments);};}());case 1:case\"end\":return _context8.stop();}}},_callee8);}));return function capNhatThongTinCaNhan(_x7){return _ref7.apply(this,arguments);};}();","map":{"version":3,"sources":["E:/FRONTEND/webphim/src/redux/actions/QuanLyNguoiDungActions.js"],"names":["Axios","Swal","ACCESSTOKEN","USER_LOGIN","DOMAIN","ACCOUNTLOGIN","history","CAP_NHAT_THONG_TIN_CA_NHAN","DANG_NHAP","LICH_SU_DAT_VE","dangNhapApiAction","userLogin","dispatch","url","method","data","result","localStorage","setItem","JSON","stringify","accessToken","fire","push","type","account","response","dangKyApiAction","userSignup","lichSuDatVeApiAction","taiKhoan","headers","getItem","console","log","capNhatThongTinCaNhan","update","title","text","icon","confirmButtonColor","confirmButtonText","then","isConfirmed","clear","window","location","href"],"mappings":"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","sourcesContent":["import Axios from 'axios'\r\nimport Swal from 'sweetalert2'\r\nimport { ACCESSTOKEN, USER_LOGIN, DOMAIN, ACCOUNTLOGIN } from '../../Util/Config'\r\nimport { history } from '../../Util/history'\r\nimport { CAP_NHAT_THONG_TIN_CA_NHAN, DANG_NHAP, LICH_SU_DAT_VE } from '../const/QuanLyPhimConst'\r\nexport const dangNhapApiAction = async (userLogin) => {\r\n    return async (dispatch) => {\r\n        try {\r\n\r\n            let result = await Axios({\r\n                url: DOMAIN + '/api/quanlynguoidung/dangnhap',\r\n                method: 'POST',\r\n                data: userLogin\r\n            })\r\n            localStorage.setItem(USER_LOGIN, JSON.stringify(result.data));\r\n            localStorage.setItem(ACCESSTOKEN, result.data.accessToken);\r\n            localStorage.setItem(ACCOUNTLOGIN, JSON.stringify(userLogin));\r\n            Swal.fire('Thông báo', 'Đăng nhập thành công', 'success')\r\n            history.push('/home')\r\n            dispatch({\r\n                type: DANG_NHAP,\r\n                data: result.data,\r\n                account: userLogin\r\n            })\r\n        } catch (err) {\r\n            Swal.fire('Thông báo', err.response.data, 'error')\r\n        }\r\n    }\r\n}\r\nexport const dangKyApiAction = async (userSignup) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = await Axios({\r\n                url: DOMAIN + '/api/QuanLyNguoiDung/DangKy',\r\n                method: 'POST',\r\n                data: userSignup\r\n            })\r\n            Swal.fire('Thông báo', 'Đăng ký thành công', 'success')\r\n            history.push('/dangnhap')\r\n        } catch (err) {\r\n            Swal.fire('Thông báo', err.response.data, 'error')\r\n        }\r\n    }\r\n}\r\nexport const lichSuDatVeApiAction = async (account) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = await Axios({\r\n                url: DOMAIN + '/api/QuanLyNguoiDung/ThongTinTaiKhoan',\r\n                method: 'POST',\r\n                data: { taiKhoan: account },\r\n                headers: { 'Authorization': 'Bearer ' + localStorage.getItem(ACCESSTOKEN) }\r\n            })\r\n            dispatch({\r\n                type: LICH_SU_DAT_VE,\r\n                data: result.data\r\n            })\r\n        } catch (err) {\r\n            console.log(err.response.data);\r\n        }\r\n    }\r\n}\r\nexport const capNhatThongTinCaNhan = async (update) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            let result = await Axios({\r\n                url: 'https://movie0706.cybersoft.edu.vn/api/QuanLyNguoiDung/CapNhatThongTinNguoiDung',\r\n                method: 'PUT',\r\n                data: update,\r\n                headers: { 'Authorization': 'Bearer ' + localStorage.getItem(ACCESSTOKEN) }\r\n            })\r\n            dispatch({\r\n                type: CAP_NHAT_THONG_TIN_CA_NHAN,\r\n                data: update\r\n            })\r\n            Swal.fire({\r\n                title: 'Cập nhật thành công.',\r\n                text: \"Vui lòng đăng nhập lại\",\r\n                icon: 'success',\r\n                confirmButtonColor: '#3085d6',\r\n                confirmButtonText: 'OK',\r\n            }).then((result) => {\r\n                if (result.isConfirmed) {\r\n                    localStorage.clear();\r\n                    window.location.href = '/dangnhap';\r\n                }\r\n            })\r\n\r\n        } catch (err) {\r\n            Swal.fire('Thông báo', 'Cập nhật thất bại', 'error')\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}