{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\FRONTEND\\\\webphim\\\\src\\\\Page\\\\Home\\\\ChiTietPhongVe.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { datVeApiAction, layThongTinPhongVeApiAction } from '../../redux/actions/QuanLyPhimActions';\nimport { datGheAction } from '../../redux/actions/QuanLyPhimActions';\nimport screen from '../../assets/screen.png';\nimport { Fragment } from 'react';\nimport { USER_LOGIN } from '../../Util/Config';\nimport swal from 'sweetalert';\nimport Swal from 'sweetalert2';\nexport default function ChiTietPhongVe(props) {\n  _s();\n\n  var _thongTinPhongVe$thon, _thongTinPhongVe$thon2, _thongTinPhongVe$thon3, _thongTinPhongVe$danh, _thongTinPhongVe$thon4, _thongTinPhongVe$thon5, _thongTinPhongVe$thon6, _thongTinPhongVe$thon7, _thongTinPhongVe$thon8, _thongTinPhongVe$thon9;\n\n  const thongTinPhongVe = useSelector(state => state.QuanLyPhimReducer.thongTinPhongVe);\n  const danhSachGheDangDat = useSelector(state => state.QuanLyPhimReducer.danhSachGheDangDat);\n  const [time, setTime] = useState({\n    minutes: 0,\n    seconds: 0\n  });\n  const [over, setOver] = useState(false);\n  const dispatch = useDispatch(); // useEffect(async () => {\n  //     let maLichChieu = props.match.params.maLichChieu;\n  //     dispatch(await layThongTinPhongVeApiAction(maLichChieu));\n  // }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      let maLichChieu = props.match.params.maLichChieu;\n      dispatch(await layThongTinPhongVeApiAction(maLichChieu));\n    }\n\n    fetchData();\n  }, [props.match.params.maLichChieu, dispatch]);\n  const [height, setHeight] = useState(window.innerHeight);\n  useEffect(() => {\n    window.onresize = function () {\n      setHeight(window.innerHeight);\n    };\n  }, [height]);\n\n  const start = () => {\n    if (over) return;\n\n    if (time.minutes === 0 && time.seconds === 0) {\n      setOver(true);\n      swal(\"Hết thời gian giữ ghế vui lòng đặt lại!\", {\n        buttons: {\n          cancel: \"Thoát!\",\n          ok: \"Đặt lại vé\"\n        }\n      }).then(value => {\n        switch (value) {\n          case \"ok\":\n            reset();\n            break;\n\n          default:\n            props.history.push('/home');\n        }\n      });\n    } else if (time.seconds === 0) setTime({\n      minutes: time.minutes - 1,\n      seconds: 59\n    });else setTime({\n      minutes: time.minutes,\n      seconds: time.seconds - 1\n    });\n  };\n\n  const reset = () => {\n    setTime({\n      minutes: 2,\n      seconds: 0\n    });\n    setOver(false);\n  };\n\n  useEffect(() => {\n    if (thongTinPhongVe.danhSachGhe != null) {\n      let timerID = setInterval(() => start(), 1000);\n      return () => clearInterval(timerID);\n    }\n  }, [start]);\n  useEffect(() => {\n    setTime({\n      minutes: 2,\n      seconds: 0\n    });\n  }, []);\n\n  const renderCountDown = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text\",\n        children: \"Th\\u1EDDi gian gi\\u1EEF gh\\u1EBF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"time\",\n        children: `${time.minutes.toString().padStart(2, '0')}:\n             ${time.seconds.toString().padStart(2, '0')}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n\n  let tongTien = danhSachGheDangDat.reduce((tongTien, gheDangDat, index) => {\n    return tongTien += gheDangDat.giaVe;\n  }, 0);\n  let disable = tongTien === 0 ? 'disable' : '';\n  let cursor = tongTien === 0 ? 'no-drop' : '';\n  let backgroundColor = tongTien === 0 ? '#cfcfcf' : '#fb4226';\n  let opacity = tongTien === 0 ? '0.7' : '';\n  let mangSapXepGheDangDat = danhSachGheDangDat.sort((ghe, gheTT) => {\n    return ghe.stt - gheTT.stt;\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"container-fluid chiTietPhongVe\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chiTietPhongVe__content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chiTietPhongVe__manHinh\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"thongTin__Rap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thongTin__Rap-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: (_thongTinPhongVe$thon = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon === void 0 ? void 0 : _thongTinPhongVe$thon.hinhAnh,\n                alt: \"filmImage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"thongTin__Rap-diaChi\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ten__Rap\",\n                children: (_thongTinPhongVe$thon2 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon2 === void 0 ? void 0 : _thongTinPhongVe$thon2.tenCumRap\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dia__Chi\",\n                children: (_thongTinPhongVe$thon3 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon3 === void 0 ? void 0 : _thongTinPhongVe$thon3.diaChi\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thongTin__Rap-timeOut\",\n            children: renderCountDown()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"manHinh\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: screen,\n            alt: \"screen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"danhSachGhe\",\n          children: (_thongTinPhongVe$danh = thongTinPhongVe.danhSachGhe) === null || _thongTinPhongVe$danh === void 0 ? void 0 : _thongTinPhongVe$danh.map((ghe, index) => {\n            let classGheVip = ghe.loaiGhe === 'Thuong' ? '' : 'gheVip';\n            let classGheDaDat = ghe.daDat ? 'gheDaDat' : '';\n            let disable = ghe.daDat ? 'disable' : '';\n            let noiDungBtn = ghe.daDat ? 'X' : ghe.stt;\n            let indexGheDangDat = danhSachGheDangDat.findIndex(gheDangDat => ghe.maGhe === gheDangDat.maGhe);\n            let classGheDangDat = indexGheDangDat !== -1 ? 'gheDangDat' : '';\n            return /*#__PURE__*/_jsxDEV(Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (danhSachGheDangDat.length <= 5) {\n                    dispatch(datGheAction(ghe.maGhe, ghe.stt, ghe.giaVe));\n                  } else {\n                    if (indexGheDangDat !== -1) {\n                      dispatch(datGheAction(ghe.maGhe, ghe.stt, ghe.giaVe));\n                    } else {\n                      swal({\n                        text: \"Mỗi booking chỉ tối đa 6 ghế!\"\n                      });\n                    }\n                  }\n                },\n                disabled: `${disable}`,\n                className: `ghe ${classGheVip} ${classGheDaDat} ${classGheDangDat}`,\n                children: noiDungBtn\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 33\n              }, this), (index + 1) % 16 === 0 ? /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 59\n              }, this) : '']\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 36\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loaiGhe\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loaiGhe__item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ghe\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Gh\\u1EBF th\\u01B0\\u1EDDng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loaiGhe__item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ghe gheVip\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Gh\\u1EBF VIP\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loaiGhe__item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ghe gheDaDat\",\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Gh\\u1EBF \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c \\u0111\\u1EB7t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loaiGhe__item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ghe gheDangDat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Gh\\u1EBF \\u0111ang ch\\u1ECDn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chiTietPhongVe__thongTin\",\n        style: {\n          height\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"thongTin__tongTien\",\n          children: [danhSachGheDangDat.reduce((tongTien, gheDangDat, index) => {\n            return tongTien += gheDangDat.giaVe;\n          }, 0).toLocaleString(), \" VND\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-0 d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thongTin_hinhAnh\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: (_thongTinPhongVe$thon4 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon4 === void 0 ? void 0 : _thongTinPhongVe$thon4.hinhAnh,\n              alt: \"phimImage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thongTin__phim\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: (_thongTinPhongVe$thon5 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon5 === void 0 ? void 0 : _thongTinPhongVe$thon5.tenPhim\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [(_thongTinPhongVe$thon6 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon6 === void 0 ? void 0 : _thongTinPhongVe$thon6.tenCumRap, \" - \", (_thongTinPhongVe$thon7 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon7 === void 0 ? void 0 : _thongTinPhongVe$thon7.tenRap]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [(_thongTinPhongVe$thon8 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon8 === void 0 ? void 0 : _thongTinPhongVe$thon8.ngayChieu, \" - \", (_thongTinPhongVe$thon9 = thongTinPhongVe.thongTinPhim) === null || _thongTinPhongVe$thon9 === void 0 ? void 0 : _thongTinPhongVe$thon9.gioChieu]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"thongTin_ghe\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Gh\\u1EBF: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 30\n            }, this), \" \", mangSapXepGheDangDat === null || mangSapXepGheDangDat === void 0 ? void 0 : mangSapXepGheDangDat.map((gheDangDat, index) => {\n              return /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"viTriGhe\",\n                children: [gheDangDat.stt, \" \\xA0 \"]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 40\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tienGhe\",\n            children: [danhSachGheDangDat.reduce((tongTien, gheDangDat, index) => {\n              return tongTien += gheDangDat.giaVe;\n            }, 0).toLocaleString(), \" \\u0111\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            cursor: `${cursor}`,\n            backgroundColor: `${backgroundColor}`,\n            opacity: `${opacity}`\n          },\n          disabled: `${disable}`,\n          className: \"btn-muaVe\",\n          onClick: async () => {\n            if (localStorage.getItem(USER_LOGIN)) {\n              let user = JSON.parse(localStorage.getItem(USER_LOGIN));\n              let objectDatVe = {\n                'maLichChieu': props.match.params.maLichChieu,\n                'danhSachVe': danhSachGheDangDat,\n                'taiKhoanNguoiDung': user.taiKhoan\n              };\n              dispatch(await datVeApiAction(objectDatVe)).then(result => {\n                Swal.fire('Thông báo', result.message, result.status);\n\n                if (result.code === 200) {\n                  dispatch({\n                    type: \"DAT_VE_THANH_CONG\"\n                  });\n                }\n\n                setTimeout(function () {\n                  props.history.push('/home');\n                }, 4000);\n              });\n            } else {\n              props.history.push('/dangnhap');\n            }\n          },\n          children: \"\\u0110\\u1EB7t V\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ChiTietPhongVe, \"b8T+f+FMFOfnEsiQ+7iKRynJrs4=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = ChiTietPhongVe;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChiTietPhongVe\");","map":{"version":3,"sources":["E:/FRONTEND/webphim/src/Page/Home/ChiTietPhongVe.js"],"names":["React","useEffect","useState","useDispatch","useSelector","datVeApiAction","layThongTinPhongVeApiAction","datGheAction","screen","Fragment","USER_LOGIN","swal","Swal","ChiTietPhongVe","props","thongTinPhongVe","state","QuanLyPhimReducer","danhSachGheDangDat","time","setTime","minutes","seconds","over","setOver","dispatch","fetchData","maLichChieu","match","params","height","setHeight","window","innerHeight","onresize","start","buttons","cancel","ok","then","value","reset","history","push","danhSachGhe","timerID","setInterval","clearInterval","renderCountDown","toString","padStart","tongTien","reduce","gheDangDat","index","giaVe","disable","cursor","backgroundColor","opacity","mangSapXepGheDangDat","sort","ghe","gheTT","stt","thongTinPhim","hinhAnh","tenCumRap","diaChi","map","classGheVip","loaiGhe","classGheDaDat","daDat","noiDungBtn","indexGheDangDat","findIndex","maGhe","classGheDangDat","length","text","toLocaleString","tenPhim","tenRap","ngayChieu","gioChieu","localStorage","getItem","user","JSON","parse","objectDatVe","taiKhoan","result","fire","message","status","code","type","setTimeout"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { datVeApiAction, layThongTinPhongVeApiAction } from '../../redux/actions/QuanLyPhimActions';\r\nimport { datGheAction } from '../../redux/actions/QuanLyPhimActions';\r\nimport screen from '../../assets/screen.png';\r\nimport { Fragment } from 'react';\r\nimport { USER_LOGIN } from '../../Util/Config';\r\nimport swal from 'sweetalert';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default function ChiTietPhongVe(props) {\r\n    const thongTinPhongVe = useSelector(state => state.QuanLyPhimReducer.thongTinPhongVe);\r\n    const danhSachGheDangDat = useSelector(state => state.QuanLyPhimReducer.danhSachGheDangDat);\r\n    const [time, setTime] = useState({ minutes: 0, seconds: 0 });\r\n    const [over, setOver] = useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n    // useEffect(async () => {\r\n    //     let maLichChieu = props.match.params.maLichChieu;\r\n    //     dispatch(await layThongTinPhongVeApiAction(maLichChieu));\r\n    // }, []);\r\n    \r\n    useEffect(() => {\r\n        async function fetchData() {\r\n            let maLichChieu = props.match.params.maLichChieu;\r\n            dispatch(await layThongTinPhongVeApiAction(maLichChieu));\r\n        }\r\n        fetchData();\r\n      }, [props.match.params.maLichChieu,dispatch]); \r\n\r\n    const [height, setHeight] = useState(window.innerHeight);\r\n    useEffect(() => {\r\n        window.onresize = function () {\r\n            setHeight(window.innerHeight);\r\n        }\r\n    }, [height]);\r\n\r\n    const start = () => {\r\n        if (over) return;\r\n        if (time.minutes === 0 && time.seconds === 0) {\r\n            setOver(true);\r\n            swal(\"Hết thời gian giữ ghế vui lòng đặt lại!\", {\r\n                buttons: {\r\n                    cancel: \"Thoát!\",\r\n                    ok: \"Đặt lại vé\",\r\n                },\r\n            })\r\n                .then((value) => {\r\n                    switch (value) {\r\n                        case \"ok\":\r\n                            reset();\r\n                            break;\r\n\r\n                        default:\r\n                            props.history.push('/home');\r\n                    }\r\n                });\r\n        }\r\n        else if (time.seconds === 0)\r\n            setTime({\r\n                minutes: time.minutes - 1,\r\n                seconds: 59\r\n            });\r\n        else\r\n            setTime({\r\n                minutes: time.minutes,\r\n                seconds: time.seconds - 1\r\n            });\r\n    };\r\n    const reset = () => {\r\n        setTime({\r\n            minutes: 2,\r\n            seconds: 0\r\n        });\r\n        setOver(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(thongTinPhongVe.danhSachGhe != null){\r\n            let timerID = setInterval(() => start(), 1000);\r\n             return () => clearInterval(timerID);\r\n            }\r\n    }, [start]);\r\n\r\n    useEffect(() => {\r\n       setTime({ minutes: 2, seconds: 0 })\r\n    }, []);\r\n\r\n    const renderCountDown = () => {\r\n        return (\r\n            <>\r\n                <p className=\"text\">Thời gian giữ ghế</p>\r\n                <p className=\"time\">{`${time.minutes.toString().padStart(2, '0')}:\r\n             ${time.seconds.toString().padStart(2, '0')}`}</p>\r\n            </>\r\n        )\r\n    }\r\n\r\n    let tongTien = danhSachGheDangDat.reduce((tongTien, gheDangDat, index) => {\r\n        return tongTien += gheDangDat.giaVe\r\n    }, 0)\r\n\r\n    let disable = (tongTien === 0) ? 'disable' : '';\r\n    let cursor = (tongTien === 0) ? 'no-drop' : '';\r\n    let backgroundColor = (tongTien === 0) ? '#cfcfcf' : '#fb4226';\r\n    let opacity = (tongTien === 0) ? '0.7' : '';\r\n    let mangSapXepGheDangDat = danhSachGheDangDat.sort((ghe, gheTT) => {\r\n        return ghe.stt - gheTT.stt;\r\n    })\r\n    return (\r\n        <section className=\"container-fluid chiTietPhongVe\">\r\n            <div className=\"chiTietPhongVe__content\">\r\n                <div className=\"chiTietPhongVe__manHinh\">\r\n                    {/* hien thi thong tin phong ve */}\r\n                    <div className=\"thongTin__Rap\">\r\n                        <div className=\"thongTin__Rap-content\">\r\n\r\n                            <div> <img src={thongTinPhongVe.thongTinPhim?.hinhAnh} alt=\"filmImage\" /></div>\r\n                            <div className=\"thongTin__Rap-diaChi\">\r\n                                <span className='ten__Rap'>{thongTinPhongVe.thongTinPhim?.tenCumRap}</span>\r\n                                <br />\r\n                                <span className='dia__Chi'>{thongTinPhongVe.thongTinPhim?.diaChi}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"thongTin__Rap-timeOut\" >\r\n                            {renderCountDown()}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"manHinh\">\r\n                        <img src={screen} alt=\"screen\" />\r\n                    </div>\r\n                    <div className=\"danhSachGhe\">\r\n                        {thongTinPhongVe.danhSachGhe?.map((ghe, index) => {\r\n                            let classGheVip = ghe.loaiGhe === 'Thuong' ? '' : 'gheVip';\r\n                            let classGheDaDat = ghe.daDat ? 'gheDaDat' : '';\r\n                            let disable = ghe.daDat ? 'disable' : '';\r\n                            let noiDungBtn = ghe.daDat ? 'X' : ghe.stt;\r\n                            let indexGheDangDat = danhSachGheDangDat.findIndex(gheDangDat => ghe.maGhe === gheDangDat.maGhe)\r\n\r\n                            let classGheDangDat = indexGheDangDat !== -1 ? 'gheDangDat' : '';\r\n                            return <Fragment key={index}>\r\n\r\n                                <button onClick={() => {\r\n                                    if (danhSachGheDangDat.length <= 5) {\r\n                                        dispatch(datGheAction(ghe.maGhe, ghe.stt, ghe.giaVe));\r\n                                    } else {\r\n                                        if (indexGheDangDat !== -1) {\r\n                                            dispatch(datGheAction(ghe.maGhe, ghe.stt, ghe.giaVe));\r\n                                        } else {\r\n                                            swal({ text: \"Mỗi booking chỉ tối đa 6 ghế!\" });\r\n                                        }\r\n                                    }\r\n                                }}\r\n                                    disabled={`${disable}`} className={`ghe ${classGheVip} ${classGheDaDat} ${classGheDangDat}`}>{noiDungBtn}</button>\r\n                                {(index + 1) % 16 === 0 ? <br /> : ''}\r\n                            </Fragment>\r\n                        })}\r\n\r\n                    </div>\r\n                    <div className='loaiGhe'>\r\n                        <div className='loaiGhe__item'>\r\n                            <span className='ghe'></span>\r\n                            <span>Ghế thường</span>\r\n                        </div>\r\n                        <div className='loaiGhe__item'>\r\n                            <span className='ghe gheVip'></span>\r\n                            <span>Ghế VIP</span>\r\n                        </div>\r\n                        <div className='loaiGhe__item'>\r\n                            <span className='ghe gheDaDat'>X</span>\r\n                            <span>Ghế đã được đặt</span>\r\n                        </div>\r\n                        <div className='loaiGhe__item'>\r\n                            <span className='ghe gheDangDat'></span>\r\n                            <span>Ghế đang chọn</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"chiTietPhongVe__thongTin\" style={{ height }}>\r\n                    <div className=\"thongTin__tongTien\">{danhSachGheDangDat.reduce((tongTien, gheDangDat, index) => {\r\n                        return tongTien += gheDangDat.giaVe\r\n                    }, 0).toLocaleString()} VND\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"m-0 d-flex\">\r\n                        <div className=\"thongTin_hinhAnh\">\r\n                            <img src={thongTinPhongVe.thongTinPhim?.hinhAnh} alt='phimImage' />\r\n                        </div>\r\n                        <div className=\"thongTin__phim\">\r\n                            <h4>{thongTinPhongVe.thongTinPhim?.tenPhim}</h4>\r\n                            <h6>{thongTinPhongVe.thongTinPhim?.tenCumRap} - {thongTinPhongVe.thongTinPhim?.tenRap}</h6>\r\n                            <p>{thongTinPhongVe.thongTinPhim?.ngayChieu} - {thongTinPhongVe.thongTinPhim?.gioChieu}</p>\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"thongTin_ghe\">\r\n                        <div><span>Ghế: </span> {\r\n                            mangSapXepGheDangDat?.map((gheDangDat, index) => {\r\n                                return <span key={index} className='viTriGhe'>{gheDangDat.stt} &nbsp; </span>\r\n                            })}\r\n                        </div>\r\n                        <div className='tienGhe'>\r\n                            {danhSachGheDangDat.reduce((tongTien, gheDangDat, index) => {\r\n                                return tongTien += gheDangDat.giaVe\r\n                            }, 0).toLocaleString()} đ\r\n                        </div>\r\n                    </div>\r\n                    <hr />\r\n                    <button style={{ cursor: `${cursor}`, backgroundColor: `${backgroundColor}`, opacity: `${opacity}` }} disabled={`${disable}`} className='btn-muaVe' onClick={async () => {\r\n                        if (localStorage.getItem(USER_LOGIN)) {\r\n                            let user = JSON.parse(localStorage.getItem(USER_LOGIN))\r\n                            let objectDatVe = {\r\n                                'maLichChieu': props.match.params.maLichChieu,\r\n                                'danhSachVe': danhSachGheDangDat,\r\n                                'taiKhoanNguoiDung': user.taiKhoan\r\n                            }\r\n                            dispatch(await datVeApiAction(objectDatVe))\r\n                            .then((result) => {\r\n                                Swal.fire('Thông báo', result.message, result.status);\r\n                                if(result.code === 200){\r\n                                    dispatch({type: \"DAT_VE_THANH_CONG\"});\r\n                                }\r\n                                setTimeout(function(){ props.history.push('/home')},4000)\r\n                               \r\n                            });\r\n                            \r\n                        } else {\r\n                             props.history.push('/dangnhap')\r\n                        }\r\n                    }}>Đặt Vé</button>\r\n                </div>\r\n            </div>\r\n        </section >\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}